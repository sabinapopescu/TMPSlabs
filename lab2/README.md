# Laboratory Work Report â€“ Structural Design Patterns

## Topic: Structural Design Patterns
## Author: Popescun Sabina
## Supervisor: Guzun Grigore
## Course: TMPS â€“ Software Design Techniques
## Lab Nr.: 2 â€“ Structural Design Patterns (Bloomify Enhancement)

## 1. Introduction / Motivation

This laboratory work continues the Bloomify project started in the Creational Design Patterns lab and focuses on the Structural Design Patterns.

In the previous lab, the emphasis was on how objects are created.  
In this lab, the emphasis shifts to how classes and objects are composed into larger structures.

The project implements:
- Decorator
- Facade
- Adapter

These patterns extend functionality, simplify the client, and improve system flexibility.

## 2. Theory â€“ Structural Design Patterns

Structural patterns define how to assemble objects/classes into flexible and efficient structures.

### Patterns implemented:
- Adapter
- Decorator
- Facade

## 3. System Description (Bloomify â€“ Extended)

Bloomify now supports:
- Bouquet enhancements (gift box, vase, express delivery, care instructions)
- Unified ordering
- Unified notification system

# ğŸ“ Bloomify Enhanced - Project Structure

```
bloomify-enhanced/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                    # Comprehensive documentation
â”œâ”€â”€ ğŸ“„ SETUP.md                     # Quick start guide
â”œâ”€â”€ ğŸ“„ CHANGELOG.md                 # List of all improvements
â”œâ”€â”€ ğŸ“„ package.json                 # NPM dependencies and scripts
â”œâ”€â”€ ğŸ“„ tsconfig.json                # TypeScript configuration
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ignore rules
â”‚
â”œâ”€â”€ ğŸ“ public/                      # Static web files
â”‚   â”œâ”€â”€ ğŸ“„ index.html              # Main HTML (Enhanced UI)
â”‚   â”œâ”€â”€ ğŸ“„ styles.css              # Modern, responsive CSS
â”‚   â””â”€â”€ ğŸ“ js/                     # Compiled JavaScript (generated by tsc)
â”‚       â”œâ”€â”€ ğŸ“ client/
â”‚       â”‚   â””â”€â”€ ğŸ“„ main.js         # Compiled from src/client/main.ts
â”‚       â”œâ”€â”€ ğŸ“ domain/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ Config.js
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ BouquetBuilder.js
â”‚       â”‚   â””â”€â”€ ğŸ“„ BouquetPrototype.js
â”‚       â”œâ”€â”€ ğŸ“ factory/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ Payment.js
â”‚       â”‚   â””â”€â”€ ğŸ“„ PaymentFactory.js
â”‚       â”œâ”€â”€ ğŸ“ models/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ Bouquet.js
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ Flower.js
â”‚       â”‚   â””â”€â”€ ğŸ“„ Customer.js
â”‚       â””â”€â”€ ğŸ“ pool/
â”‚           â””â”€â”€ ğŸ“„ ConnectionPool.js
â”‚
â””â”€â”€ ğŸ“ src/                         # TypeScript source files
    â”‚
    â”œâ”€â”€ ğŸ“ client/                  # UI Integration Layer
    â”‚   â””â”€â”€ ğŸ“„ main.ts             # Main application logic
    â”‚                                â€¢ Event handlers
    â”‚                                â€¢ DOM manipulation
    â”‚                                â€¢ Validation logic
    â”‚                                â€¢ Toast notifications
    â”‚
    â”œâ”€â”€ ğŸ“ domain/                  # Design Pattern Implementations
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“„ Config.ts           # ğŸ”· Singleton Pattern
    â”‚   â”‚                            â€¢ Global configuration
    â”‚   â”‚                            â€¢ Currency management
    â”‚   â”‚                            â€¢ Locale settings
    â”‚   â”‚                            â€¢ LocalStorage persistence
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“„ BouquetBuilder.ts   # ğŸ”· Builder Pattern
    â”‚   â”‚                            â€¢ Step-by-step construction
    â”‚   â”‚                            â€¢ Fluent interface
    â”‚   â”‚                            â€¢ Validation rules
    â”‚   â”‚                            â€¢ Reset functionality
    â”‚   â”‚
    â”‚   â””â”€â”€ ğŸ“„ BouquetPrototype.ts # ğŸ”· Prototype Pattern
    â”‚                                â€¢ Template cloning
    â”‚                                â€¢ Pre-configured bouquets
    â”‚                                â€¢ Deep copy implementation
    â”‚
    â”œâ”€â”€ ğŸ“ factory/                 # Factory Pattern
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“„ Payment.ts          # Payment Implementations
    â”‚   â”‚                            â€¢ CardPayment class
    â”‚   â”‚                            â€¢ CryptoPayment class
    â”‚   â”‚                            â€¢ BankTransferPayment class
    â”‚   â”‚                            â€¢ Validation methods
    â”‚   â”‚
    â”‚   â””â”€â”€ ğŸ“„ PaymentFactory.ts   # ğŸ”· Factory Method Pattern
    â”‚                                â€¢ PaymentCreator abstract class
    â”‚                                â€¢ SimplePaymentCreator implementation
    â”‚                                â€¢ EnhancedPaymentCreator (with logging)
    â”‚
    â”œâ”€â”€ ğŸ“ models/                  # Data Models
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“„ Bouquet.ts          # Bouquet Entity
    â”‚   â”‚                            â€¢ Price calculation
    â”‚   â”‚                            â€¢ Clone support
    â”‚   â”‚                            â€¢ JSON serialization
    â”‚   â”‚                            â€¢ Validation
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ğŸ“„ Flower.ts           # Flower Entity
    â”‚   â”‚                            â€¢ Properties (kind, color, price)
    â”‚   â”‚                            â€¢ Emoji mapping
    â”‚   â”‚                            â€¢ Price range validation
    â”‚   â”‚
    â”‚   â””â”€â”€ ğŸ“„ Customer.ts         # Customer Entity
    â”‚                                â€¢ Name and email
    â”‚                                â€¢ Email validation
    â”‚                                â€¢ Privacy features
    â”‚
    â””â”€â”€ ğŸ“ pool/                    # Object Pool Pattern
        â”‚
        â””â”€â”€ ğŸ“„ ConnectionPool.ts   # ğŸ”· Object Pool Pattern (Bonus)
                                     â€¢ Connection reuse
                                     â€¢ Resource management
                                     â€¢ Statistics tracking
                                     â€¢ Singleton wrapper

```

## ğŸ“Š File Count Summary

- **Documentation**: 4 files (README, SETUP, CHANGELOG, .gitignore)
- **Configuration**: 2 files (package.json, tsconfig.json)
- **HTML**: 1 file
- **CSS**: 1 file
- **TypeScript Source**: 11 files
- **Total**: ~19 source files + compiled JS

## ğŸ¯ Design Patterns Map

| Pattern | File | Purpose |
|---------|------|---------|
| ğŸ”· **Singleton** | `Config.ts` | Single instance for global configuration |
| ğŸ”· **Builder** | `BouquetBuilder.ts` | Step-by-step object construction |
| ğŸ”· **Prototype** | `BouquetPrototype.ts` | Clone pre-configured objects |
| ğŸ”· **Factory Method** | `PaymentFactory.ts` | Create payment objects polymorphically |
| ğŸ”· **Object Pool** | `ConnectionPool.ts` | Reuse expensive resources |

## ğŸ”„ Data Flow

```
1. User Input (HTML Forms)
   â†“
2. Event Handlers (main.ts)
   â†“
3. Validation (main.ts)
   â†“
4. Pattern Classes (domain/, factory/)
   â†“
5. Domain Models (models/)
   â†“
6. Configuration (Config singleton)
   â†“
7. DOM Update (main.ts)
   â†“
8. User Feedback (Toast, Preview)
```

## ğŸ“¦ Build Process

```
TypeScript Source Files (src/)
         â†“
    TypeScript Compiler (tsc)
         â†“
JavaScript Output (public/js/)
         â†“
    Web Server (http-server)
         â†“
   Browser (localhost:3000)
```

## ğŸ“ Pattern Interaction Example

```typescript
// 1. Singleton provides configuration
const config = Config.getInstance(); // Singleton

// 2. Builder constructs bouquet
const builder = new BouquetBuilder(); // Builder
const bouquet = builder
  .setName("Love Bouquet")
  .addFlower("Rose", "Red", 3.0, 12)
  .build();

// 3. Prototype clones template
const template = BouquetTemplate.presets().valentine; // Prototype
const cloned = template.clone();

// 4. Factory creates payment
const factory = new SimplePaymentCreator(); // Factory
const payment = factory.create({ type: "card", masked: "1234" });

// 5. Pool manages connections
const pool = ConnectionPool.getInstance(); // Pool + Singleton
const conn = pool.acquire();
```

---

**Legend:**
- ğŸ“ = Directory
- ğŸ“„ = File
- ğŸ”· = Design Pattern Implementation

## 5. Implementation & Explanation

### 5.1 Decorator â€“ Bouquet Enhancements

Provides dynamic stacking of enhancements:
- GiftBoxDecorator
- PremiumVaseDecorator
- CareInstructionsDecorator
- ExpressDeliveryDecorator

Used to add responsibilities without subclass explosion.

### 5.2 Facade â€“ BloomifyOrderFacade

A single high-level API:
```
placeOrder(options)
```
This hides:
- bouquet construction
- decorators
- payment factory
- config handling

### 5.3 Adapter â€“ Unified Notification System

Adapters implemented:
- EmailNotificationAdapter
- SMSNotificationAdapter
- PushNotificationAdapter

All unified under:
```
INotification
NotificationManager
```

## 6. Files Added / Modified

New directories and files:
- /decorators/*
- /facade/*
- /adapters/*

Modified:
- client/main.ts

## 7. Difficulties Encountered

- TS isolatedModules export issues  
- Facade responsibility balancing  
- Decorator transparency  
- Designing universal notification interface  
- Keeping a single client entrypoint  

## 8. Results / Screenshots / Conclusions

- Successfully implemented 3 structural patterns
- Clean and extensible architecture
- Unified API for ordering
- Unified adapters for notification
- Bouquet enhancements via decorator chain
- Fully satisfies lab requirements

Conclusions:  
This lab extended Bloomify into a robust, flexible architecture following best practices of structural design patterns.

